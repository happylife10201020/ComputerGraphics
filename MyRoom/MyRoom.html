<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = "UTF-8">
        <title>Material, Light and Shaodw</title>
        <style>
            body{
                margin: 0 ;
                overflow: hidden ;
            }
            canvas{
                display: block ;
            }
        </style>

        <script type = "importmap">
            {
                "imports" : {
                    "three" : "https://unpkg.com/three@0.150.1/build/three.module.js",
                    "three/addons/" : "https://unpkg.com/three@0.150.1/examples/jsm/",
                    "three/examples/jsm/controls/DragControls.js": "https://unpkg.com/three@0.150.1/examples/jsm/controls/DragControls.js"
                }
            }
        </script>
    </head>

    <body>
        <div id = "WebGL-output"></div>
        <script type = "module">
            import * as THREE from "three" ;
            import { OrbitControls } from "three/addons/controls/OrbitControls.js" ;
            import { DragControls } from 'three/examples/jsm/controls/DragControls.js'; 

            const scene = new THREE.Scene() ;
            scene.background = new THREE.Color("darkgray") ;

            const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000) ;
            camera.position.set(100, 100, 100) ;

            const renderer = new THREE.WebGLRenderer({antialias: true}) ; 
            renderer.setSize(window.innerWidth, window.innerHeight) ;
             document.getElementById("WebGL-output").appendChild(renderer.domElement) ;




            const axes = new THREE.AxesHelper(200) ;
            scene.add(axes) ;

            const plane = new THREE.Mesh(
                new THREE.BoxGeometry(100, 100),
                new THREE.MeshStandardMaterial({color: 'yellow'})
            ) ;
            plane.rotation.set(-0.5 * Math.PI, 0, 0) ;
            plane.position.set(0, 0, 0) ;
            scene.add(plane) ;

            const wall_1 = new THREE.Mesh(
                new THREE.PlaneGeometry(100, 70),
                new THREE.MeshStandardMaterial({color: 'white'})
            ) ;
            wall_1.rotation.set(0, 0, 0) ;
            wall_1.position.set(0, 35, -50) ;
            scene.add(wall_1) ;

            const wall_2 = new THREE.Mesh(
                new THREE.BoxGeometry(100, 70),
                new THREE.MeshStandardMaterial({color: 'white'})
            ) ;
            wall_2.rotation.set(0, 0.5 * Math.PI, 0) ;
            wall_2.position.set(-50, 35, 0) ;
            scene.add(wall_2) ;

            const wall_3 = new THREE.Mesh(
                new THREE.PlaneGeometry(100, 70),
                new THREE.MeshStandardMaterial({color: 'white'})
            ) ;
            wall_3.rotation.set(-Math.PI, 0, 0) ;
            wall_3.position.set(0, 35, 50) ;
            scene.add(wall_3) ;

            const roof = new THREE.Mesh(
                new THREE.PlaneGeometry(100, 100),
                new THREE.MeshStandardMaterial({color: 'lightgray'})
            ) ;
            roof.rotation.set(0.5 * Math.PI, 0, 0) ;
            roof.position.set(0, 70, 0) ;
            scene.add(roof) ;

            const Door = new THREE.Mesh(
                new THREE.BoxGeometry(15, 30, 1),
                new THREE.MeshStandardMaterial({color: 'brown'})
            )
            Door.rotation.set(0, Math.PI, 0) ;
            Door.position.set(40, 15, 49.5) ;
            scene.add(Door) ;

            const Window_1 = new THREE.Mesh(
                new THREE.BoxGeometry(35, 35, 1),
                new THREE.MeshStandardMaterial({color: 'lightblue', opacity: 0.6, transparent: true})
            )
            Window_1.rotation.set(0, Math.PI, 0) ;
            Window_1.position.set(-20, 40, -49.5) ;
            scene.add(Window_1) ;

            const Window_2 = new THREE.Mesh(
                new THREE.BoxGeometry(35, 35, 1),
                new THREE.MeshStandardMaterial({color: 'lightblue', opacity: 0.6, transparent: true})
            )
            Window_2.rotation.set(0,  Math.PI, 0) ;
            Window_2.position.set(20, 40, -49.5) ;
            scene.add(Window_2) ;

            const bed = new THREE.Mesh(
                new THREE.BoxGeometry(30, 10, 50),
                new THREE.MeshStandardMaterial({color: 'pink'})
            )
            bed.position.set(-35, 5, 18) ;
            scene.add(bed) ;
            

            //Light
            const ambientLight = new THREE.AmbientLight(0xffffff, 1) ;
            scene.add(ambientLight) ;


            const draggableObjects = [ bed]; 
            let dragControls = new DragControls(
                draggableObjects, 
                camera, 
                renderer.domElement
            )

            const orbitControls = new OrbitControls(camera, renderer.domElement);
            orbitControls.update();

            dragControls.addEventListener('dragstart', function (event) {
                orbitControls.enabled = false;
            });
            dragControls.addEventListener('drag', function (event) {
                event.object.position.y = event.object.geometry.parameters.height / 2;
            });
            dragControls.addEventListener('dragend', function (event) {
                orbitControls.enabled = true;
            });

            function animate(){
                requestAnimationFrame(animate) ;
                orbitControls.update() ;
                renderer.render(scene, camera) ;
            }
            animate() ;

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        </script>
    </body>
</html>